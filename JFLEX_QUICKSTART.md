# JFlex Scanner Quick Start Guide

## Step 1: Verify JFlex Installation

Your JFlex is already installed at `C:\JFLEX`. Verify it:

```powershell
dir C:\JFLEX\bin\jflex.bat
```

If this shows the file exists, you're ready to build!

## Step 2: Build the JFlex Scanner

## Step 2: Build the JFlex Scanner

Choose your preferred method:

### Option A: Using PowerShell (Recommended)
```powershell
cd e:\CC\CompilerConstruction
.\build.ps1 -Action build
```

### Option B: Using Batch Script
```cmd
cd e:\CC\CompilerConstruction
build_jflex.bat
```

### Option C: Manual Build
```bash
cd e:\CC\CompilerConstruction\src
C:\JFLEX\bin\jflex.bat Scanner.jflex
javac -cp . *.java
cd ..
mkdir bin
move src\*.class bin\
```

## Step 3: Run Tests

After building:

```powershell
# Run all tests
cd e:\CC\CompilerConstruction\bin
java -cp . JFlexScannerTest

# Run specific test
java -cp . JFlexScannerTest -f ../tests/test1.lang

# Interactive mode
java -cp . JFlexScannerTest -i
```

## Project Structure After Build

```
CompilerConstruction/
├── src/
│   ├── Scanner.jflex          (JFlex specification file)
│   ├── Scanner.java           (Generated by JFlex)
│   ├── Token.java             (Unchanged)
│   ├── TokenType.java         (Unchanged)
│   ├── SymbolTable.java       (Unchanged)
│   ├── ErrorHandler.java      (Unchanged)
│   ├── ManualScanner.java     (Original implementation)
│   └── JFlexScannerTest.java  (Test harness)
├── bin/                       (Compiled .class files)
├── tests/
│   ├── test1.lang
│   ├── test2.lang
│   ├── expected_test1.txt
│   └── ...
├── build.ps1                  (PowerShell build script)
└── JFLEX_IMPLEMENTATION.md    (Detailed documentation)
```

## Compare Manual Scanner with JFlex Scanner

To compare outputs between ManualScanner and JFlexScanner:

```java
// Create a test file that uses both scanners
String source = new String(Files.readAllBytes(Path.of("tests/test1.lang")));

// Manual Scanner
ManualScanner manualScanner = new ManualScanner(source);
List<Token> manualTokens = manualScanner.scanTokens();

// JFlex Scanner
Scanner jflexScanner = new Scanner(new StringReader(source));
List<Token> jflexTokens = jflexScanner.scanAllTokens();

// Compare
System.out.println("Manual Scanner tokens: " + manualTokens.size());
System.out.println("JFlex Scanner tokens: " + jflexTokens.size());
```

## Troubleshooting

### JFlex not found
- Ensure JFlex is installed and in PATH
- Try the full path: `C:\jflex\bin\jflex.bat src\Scanner.jflex`

### Compilation errors in generated Scanner.java
- Make sure Token, TokenType, SymbolTable, and ErrorHandler are in the same directory
- Check that Scanner.jflex is using the correct class names

### Test failures
- Verify the test input files exist in `tests/` directory
- Check that expected output files match the format

## Key Features of the JFlex Implementation

1. **Regex-based patterns**: Easier to read and modify than hand-written parsing logic
2. **Automatic line/column tracking**: Built-in with `%line` and `%column` directives
3. **Optimized DFA**: Faster than manual character-by-character parsing
4. **Token priorities**: Handled by rule ordering (longest match, then first rule)
5. **Same output format**: Compatible with existing ManualScanner interface

## Files Generated by JFlex

When you run `jflex Scanner.jflex`, it generates:
- `Scanner.java` - The main lexer class
- Any backup files (`.bak`)

## Build Artifact Locations

- **Generated Java**: `src/Scanner.java`
- **Compiled Classes**: `bin/` directory
- **Test Results**: Console output from `JFlexScannerTest`

## Next Steps

1. Build the JFlex scanner
2. Run the test suite to verify it works
3. Compare output with ManualScanner
4. Integrate into your parser/compiler

## References

- JFlex Manual: https://www.jflex.de/manual.html
- Regular Expressions: https://www.jflex.de/manual.html#Macros
- Token Specification Details: See `JFLEX_IMPLEMENTATION.md`

---

**Note**: The generated `Scanner.java` file is auto-generated. Do not edit it directly. If you need to modify token rules, edit `Scanner.jflex` and regenerate.
