# Compiler Construction - Custom Language Scanner

## ğŸ“š Project Overview

This project implements a lexical analyzer (scanner/lexer) for a custom programming language using both **manual implementation** and **JFlex (automatic generation)**.

## ğŸ—‚ï¸ Project Structure

```
CompilerConstruction/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ManualScanner.java          # Hand-written lexical analyzer
â”‚   â”œâ”€â”€ Token.java                  # Token class definition
â”‚   â”œâ”€â”€ TokenType.java              # Enumeration of token types
â”‚   â”œâ”€â”€ SymbolTable.java            # Symbol table for identifier tracking
â”‚   â”œâ”€â”€ ErrorHandler.java           # Lexical error reporting
â”‚   â”œâ”€â”€ Scanner.jflex               # JFlex specification file
â”‚   â”œâ”€â”€ Scanner.java                # Auto-generated by JFlex
â”‚   â”œâ”€â”€ JFlexScannerTest.java       # Test harness
â”‚   â””â”€â”€ QuickScannerTest.java       # Quick diagnostic test
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ Automata_Design.pdf         # DFA/NFA state diagrams
â”‚   â”œâ”€â”€ LanguageGrammar.txt         # Formal language definition
â”‚   â”œâ”€â”€ Comparison.pdf              # Manual vs JFlex comparison
â”‚   â””â”€â”€ README.md                   # Technical documentation
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test1.lang                  # Valid tokens (7-class coverage)
â”‚   â”œâ”€â”€ test2.lang                  # Complex expressions
â”‚   â”œâ”€â”€ test3.lang                  # Functions and blocks
â”‚   â”œâ”€â”€ test4.lang                  # Lexical errors
â”‚   â”œâ”€â”€ test5.lang                  # Comments and edge cases
â”‚   â”œâ”€â”€ expected_test1.txt          # Expected output
â”‚   â”œâ”€â”€ expected_test2.txt
â”‚   â”œâ”€â”€ expected_test3.txt
â”‚   â”œâ”€â”€ expected_test4.txt
â”‚   â”œâ”€â”€ expected_test5.txt
â”‚   â””â”€â”€ TestResults.txt             # Test execution results
â”‚
â”œâ”€â”€ nfa_output/                     # NFA/DFA visualizations (dot files)
â”œâ”€â”€ bin/                            # Compiled class files
â”‚
â”œâ”€â”€ README.md                       # This file
â”œâ”€â”€ JFLEX_QUICKSTART.md            # Quick setup guide
â”œâ”€â”€ JFLEX_IMPLEMENTATION.md        # Detailed JFlex documentation
â””â”€â”€ JFLEX_BUILD_SUMMARY.md         # Build and test summary
```

---

## ğŸŒ Language Specification

### Language Name & File Extension
- **Language Name**: CompilerConstruction Custom Language
- **File Extension**: `.lang`
- **Target Audience**: Educational - Compiler design learning
- **Use Case**: Lexical analysis study and token recognition

### Keywords (Reserved Words)
| Keyword | Meaning | Example |
|---------|---------|---------|
| `true` | Boolean literal - true value | `Flag = true;` |
| `false` | Boolean literal - false value | `Active = false;` |

*Note: Only 2 keywords in this language. Identifiers starting with uppercase letters can be used as variable/function names.*

### Identifier Rules

**Valid Identifiers:**
- Must start with an **uppercase letter** `[A-Z]`
- Followed by zero or more **lowercase letters, digits, or underscores** `[a-z0-9_]*`
- Maximum length: **31 characters**

**Valid Examples:**
```
A                    # Single character
Count                # Multiple uppercase start
Count_2              # With underscore
Value_123            # With digits
MyFunction           # Descriptive name
X                    # Single variable
```

**Invalid Examples:**
```
count                # âŒ Starts with lowercase
_Variable            # âŒ Starts with underscore
123Variable          # âŒ Starts with digit
My-Var               # âŒ Contains hyphen
MyVariable_          # âŒ Identifier tail error (underscore OK, but context matters)
```

### Literal Formats

#### Boolean Literals
- **Syntax**: `true` or `false` (case-sensitive)
- **Valid Examples**: `true`, `false`
- **Usage**: 
  ```
  Flag = true;
  Active = false;
  ```

#### Integer Literals
- **Syntax**: `[+|-]?\d+`
- **Range**: Unlimited precision (handled by Java BigInteger if needed)
- **Valid Examples**:
  ```
  42          # Positive integer
  -15         # Negative integer
  +100        # Explicitly positive
  0           # Zero
  ```

#### Floating-Point Literals
- **Syntax**: `[+|-]?\d+\.\d{1,6}`
- **Decimal Places**: 1 to 6 digits after decimal point (maximum precision)
- **Format**: Must have digits before AND after decimal point
- **Valid Examples**:
  ```
  3.14        # Basic decimal
  -0.001      # Small decimal
  +1.5        # Explicitly positive
  123.456789  # 6 decimal places
  0.1         # Leading zero required
  ```
- **Invalid Examples**:
  ```
  3.          # âŒ No digits after decimal
  .14         # âŒ No digits before decimal
  3.1234567   # âŒ More than 6 decimal places
  ```

### Operators

#### Single Character Operators (Binary/Unary)
| Operator | Meaning | Example | Precedence |
|----------|---------|---------|-----------|
| `+` | Addition / Unary Plus | `A + B`, `+5` | 3 |
| `-` | Subtraction / Unary Minus | `A - B`, `-5` | 3 |
| `*` | Multiplication | `A * B` | 2 |
| `/` | Division | `A / B` | 2 |
| `%` | Modulo | `A % B` | 2 |
| `<` | Less Than | `A < B` | 4 |
| `>` | Greater Than | `A > B` | 4 |
| `=` | Assignment / Equality | `A = B` | 5 |
| `!` | Logical NOT / Negation | `!Flag` | 1 |

**Operator Precedence** (1 = highest):
1. `!` (Logical NOT)
2. `*`, `/`, `%` (Multiplicative)
3. `+`, `-` (Additive)
4. `<`, `>` (Relational)
5. `=` (Assignment/Equality)

**Examples**:
```
Result = A + B * C;        # Multiplication first
Check = !Flag;             # Negation before assignment
Value = X < 10;            # Less than comparison
```

### Punctuators (Delimiters)
| Punctuator | Name | Usage |
|-----------|------|-------|
| `(` `)` | Parentheses | Function calls, grouping expressions |
| `{` `}` | Braces | Block delimiters |
| `[` `]` | Brackets | Array indexing |
| `,` | Comma | Argument/parameter separator |
| `;` | Semicolon | Statement terminator |
| `:` | Colon | Label/type separator |

**Examples**:
```
Func(A, B);                # Parentheses and comma
{ Result = A + B; }        # Braces and semicolon
Array[10];                 # Brackets
```

### Comments

#### Single-Line Comments
- **Syntax**: `##` followed by any text until end of line
- **Format**: `## This is a comment`
- **Scope**: Everything after `##` until newline is ignored
- **Nesting**: Not supported
- **Examples**:
  ```
  ## This is a comment
  Count = 5;  ## Initialize to 5
  ## Multiple comment lines
  ## must use ## on each line
  ```

### Token Classes Summary

The scanner recognizes **7 token classes** (in priority order):

1. **SINGLE_LINE_COMMENT** - `##` comments (skipped)
2. **BOOLEAN_LITERAL** - `true`, `false`
3. **IDENTIFIER** - User-defined names (uppercase start, â‰¤31 chars)
4. **FLOATING_POINT_LITERAL** - Decimals with 1-6 precision
5. **INTEGER_LITERAL** - Whole numbers, optional sign
6. **SINGLE_CHAR_OPERATOR** - `+ - * / % < > = !`
7. **PUNCTUATOR** - `( ) { } [ ] , ; :`

---

## ğŸ“ Sample Programs

### Sample 1: Variable Assignment and Arithmetic
```
## Simple arithmetic expression
A = 10;
B = 20;
Result = A + B * 2;
```

**Tokens Generated**:
```
IDENTIFIER: A
OPERATOR: =
INTEGER: 10
PUNCTUATOR: ;
IDENTIFIER: B
OPERATOR: =
INTEGER: 20
PUNCTUATOR: ;
IDENTIFIER: Result
OPERATOR: =
IDENTIFIER: A
OPERATOR: +
IDENTIFIER: B
OPERATOR: *
INTEGER: 2
PUNCTUATOR: ;
```

### Sample 2: Boolean Logic
```
## Boolean expressions and control
Flag = true;
Check = !Flag;
X = 5;
Y = 10;
Result = (X < Y);
```

**Tokens Generated**:
```
IDENTIFIER: Flag
OPERATOR: =
BOOLEAN_LITERAL: true
PUNCTUATOR: ;
IDENTIFIER: Check
OPERATOR: =
OPERATOR: !
IDENTIFIER: Flag
PUNCTUATOR: ;
... (continues)
```

### Sample 3: Function Declaration and Call
```
## Function with parameters
Main_func(Arg1, Arg2) {
    Result = Arg1 + Arg2;
    Flag = true;
    Check = !Flag;
}
```

**Tokens Generated**:
```
IDENTIFIER: Main_func
PUNCTUATOR: (
IDENTIFIER: Arg1
PUNCTUATOR: ,
IDENTIFIER: Arg2
PUNCTUATOR: )
PUNCTUATOR: {
IDENTIFIER: Result
OPERATOR: =
IDENTIFIER: Arg1
OPERATOR: +
IDENTIFIER: Arg2
PUNCTUATOR: ;
... (continues)
```

---

## ğŸ› ï¸ Compilation and Execution Instructions

### Prerequisites
- **Java Development Kit (JDK)**: Version 8 or higher
- **JFlex**: Located at `C:\JFLEX` (optional, for regenerating scanner)
- **Operating System**: Windows (batch scripts), Linux/macOS (bash scripts)

### Building the Project

#### Option 1: Using PowerShell Build Script (Recommended)
```powershell
cd e:\CC\CompilerConstruction
.\build.ps1 -Action build
```

#### Option 2: Manual Build
```bash
# Navigate to source directory
cd src

# Compile all Java files
javac -cp . *.java

# Or compile specific files
javac -cp . Token.java TokenType.java SymbolTable.java ErrorHandler.java ManualScanner.java Scanner.java JFlexScannerTest.java
```

#### Option 3: Regenerate from JFlex (if modifying Scanner.jflex)
```bash
cd src
C:\JFLEX\bin\jflex.bat Scanner.jflex
javac -cp . *.java
```

### Running the Scanner

#### Test All Files
```bash
cd e:\CC\CompilerConstruction
java -cp src JFlexScannerTest
```

#### Test Specific File
```bash
java -cp src JFlexScannerTest -f tests/test1.lang
```

#### Interactive Mode
```bash
java -cp src JFlexScannerTest -i
# Then type your input and press Ctrl+D (Unix) or Ctrl+Z (Windows) to finish
```

#### View Help
```bash
java -cp src JFlexScannerTest -h
```

### Running Manual Scanner Instead
```bash
java -cp src QuickScannerTest
# Create a test class to use ManualScanner
```

---

## ğŸ“Š Token Recognition Examples

### Example 1: Valid Tokens
**Input**:
```
Count = 42;
```

**Output**:
```
<IDENTIFIER, "Count", Line: 1, Col: 1>
<SINGLE_CHAR_OPERATOR, "=", Line: 1, Col: 7>
<INTEGER_LITERAL, "42", Line: 1, Col: 9>
<PUNCTUATOR, ";", Line: 1, Col: 11>
```

### Example 2: With Comments
**Input**:
```
## Initialize count
Count = 42;  ## Set to 42
```

**Output** (comments skipped):
```
<IDENTIFIER, "Count", Line: 2, Col: 1>
<SINGLE_CHAR_OPERATOR, "=", Line: 2, Col: 7>
<INTEGER_LITERAL, "42", Line: 2, Col: 9>
<PUNCTUATOR, ";", Line: 2, Col: 11>
```

### Example 3: Floating Point
**Input**:
```
Pi = 3.14159;
```

**Output**:
```
<IDENTIFIER, "Pi", Line: 1, Col: 1>
<SINGLE_CHAR_OPERATOR, "=", Line: 1, Col: 4>
<FLOATING_POINT_LITERAL, "3.14159", Line: 1, Col: 6>
<PUNCTUATOR, ";", Line: 1, Col: 13>
```

### Example 4: Error Detection
**Input**:
```
count = 10;
```

**Output**:
```
Error: InvalidIdentifier at Line: 1, Col: 1
Lexeme: "count"
Reason: Identifier must start with an uppercase letter.
```

---

## ğŸ” Implementation Details

### ManualScanner
- **Type**: Hand-written lexical analyzer
- **Method**: Character-by-character parsing with lookahead
- **Performance**: Good, optimized for educational purposes
- **File Size**: ~550 lines
- **Maintainability**: Moderate (requires careful handling of parsing logic)

### JFlex Scanner
- **Type**: Automatically generated by JFlex
- **Method**: Deterministic Finite Automaton (DFA)
- **Performance**: Excellent (optimized by JFlex compiler)
- **File Size**: ~630 lines (auto-generated)
- **Maintainability**: Superior (rule-based specification)

### Comparison
| Aspect | ManualScanner | JFlex Scanner |
|--------|---------------|---------------|
| Implementation | Hand-coded | Auto-generated |
| DFA States | Manual simulation | 21 optimized states |
| Token Priority | Explicit logic | Declarative order |
| Error Handling | Custom code | JFlex framework |
| Performance | Optimized loop | DFA tables |
| Flexibility | Easy to modify | Edit .jflex file |

---

## ğŸ“‹ Test Files

### test1.lang (7-Class Coverage)
Tests all 7 token classes in a single file

### test2.lang (Complex Expressions)
Tests operator precedence and complex expressions

### test3.lang (Functions and Blocks)
Tests function declarations and code blocks

### test4.lang (Lexical Errors)
Tests invalid tokens and error detection

### test5.lang (Comments and Edge Cases)
Tests comment handling and edge cases

---

## ğŸ¯ Key Features

âœ… **Dual Implementation**: Both manual and automatic (JFlex) scanners  
âœ… **7 Token Classes**: Comments, literals, identifiers, operators, punctuators  
âœ… **Error Reporting**: Detailed lexical error messages  
âœ… **Symbol Table**: Tracks identifier usage and frequency  
âœ… **Statistics**: Token counts and process statistics  
âœ… **Line/Column Tracking**: Precise error location reporting  
âœ… **Test Suite**: 5 comprehensive test files with expected outputs  
âœ… **Documentation**: Complete language specification and guides  

---

## ğŸ“ Support & Documentation

For more detailed information:
- **DFA Design**: See `docs/Automata_Design.pdf`
- **Grammar**: See `docs/LanguageGrammar.txt`
- **Implementation Comparison**: See `docs/Comparison.pdf`
- **JFlex Setup**: See `JFLEX_QUICKSTART.md`
- **Build Details**: See `JFLEX_BUILD_SUMMARY.md`

---

## ğŸ“„ License & Author

**Project**: Compiler Construction - Lexical Analysis  
**Date**: February 16, 2026  
**Java Version**: JDK 8+  
**JFlex Version**: 1.6+  
**Purpose**: Educational - Learning compiler design and lexical analysis

---

**Status**: âœ… Complete and Tested
